(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(e,t,a){e.exports=a(351)},182:function(e,t,a){},351:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(24),c=a.n(i),s=(a(182),a(93)),l=a.n(s),o=a(43),u=a(161),d=a(44),m=a(360),h=a(96),f=a(369),p=a(162),v=a.n(p),g="https://www.mocky.io/v2/5cd04a20320000442200fc10",E=a(13),b=a.n(E);a(203);var C=a(163);var O=function(e){var t=Object(n.useState)({startDate:null,endDate:null}),a=Object(d.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)(null),l=Object(d.a)(s,2),o=l[0],u=l[1];return r.a.createElement("div",{className:"date-picker"},r.a.createElement(C.DateRangePicker,{startDate:i.startDate,endDate:i.endDate,startDateId:"start_date",endDateId:"end_date",onDatesChange:function(t){var a=t.startDate,n=t.endDate;c({startDate:a,endDate:n}),a&&n&&a.isValid()&&n.isValid()&&e.onDateSelected({startDate:a,endDate:n})},focusedInput:o,onFocusChange:function(e){return u(e)},isOutsideRange:function(e){return b()().diff(e)<0}}))},S=a(72),D=a(73),w=a(78),x=a(74),y=a(79),k=a(31),j=document.body.clientWidth>1e3?1e3:document.body.clientWidth,A=j/3,N=50,T=20,z=20,B=20,I=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(w.a)(this,Object(x.a)(t).call(this,e))).state={chart:null},a}return Object(y.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"renderChart",value:function(){var e=this,t=this.props.data;this.xScale=k.g().domain([k.e(t,function(e){return new Date(e.timestamp)}),k.d(t,function(e){return new Date(e.timestamp)})]).range([0+N,j-T]),this.yScale=k.f().domain([0,k.d(t,function(e){return e.revenue/e.impressions*1e3})]).range([A-z,0+B]),this.xAxis=k.a(this.xScale),this.yAxis=k.b(this.yScale),this.line=k.c().x(function(t){return e.xScale(new Date(t.timestamp))}).y(function(t){return e.yScale(t.revenue/t.impressions*1e3)}),this.setState({chart:this.line(t)})}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.renderChart(),k.h(this.refs.xAxis).call(this.xAxis),k.h(this.refs.yAxis).call(this.yAxis)}},{key:"render",value:function(){return r.a.createElement("svg",{className:"chart",width:j,height:A},r.a.createElement("path",{d:this.state.chart,fill:"none",stroke:"#1070CA"}),r.a.createElement("g",null,r.a.createElement("g",{ref:"xAxis",transform:"translate(0, ".concat(A-B,")")}),r.a.createElement("g",{ref:"yAxis",transform:"translate(".concat(N,", 0)")})))}}]),t}(r.a.Component),P=a(366),R=a(367),V=a(364),F=a(368),M=a(365),H=a(164);var W=function(e){var t=e.pages,a=e.selected,n=e.onSelect;return r.a.createElement("div",{className:"pagination"},r.a.createElement(H.a,{marginRight:16,appearance:"minimal",intent:"none",onClick:function(){return 1!==a&&n(a-1)}},"<<"),Object(o.a)(Array(t).keys()).map(function(e){return r.a.createElement(H.a,{key:e+1,marginRight:16,appearance:"minimal",intent:"none",isActive:a===e+1,onClick:function(){return n(e+1)}},e+1)}),r.a.createElement(H.a,{marginRight:16,appearance:"minimal",intent:"none",onClick:function(){return t!==a&&n(a+1)}},">>"))},_={NONE:"NONE",ASC:"ASC",DESC:"DESC"},G=["timestamp","game","revenue","impressions","ecpm"],J=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(w.a)(this,Object(x.a)(t).call(this,e))).state={searchQuery:"",orderedColumn:0,ordering:_.ASC,selectedPage:1,perPage:5},a}return Object(y.a)(t,e),Object(D.a)(t,[{key:"sort",value:function(e){var t=this,a=this.state,n=a.ordering,r=a.orderedColumn;if(n===_.NONE)return e;var i=G[r];return"ecpm"===i?Object(o.a)(e).sort(function(e,a){var n=e.revenue/e.impressions*1e3,r=a.revenue/a.impressions*1e3,i={true:1,false:-1};return t.state.ordering===_.ASC?n===r?0:i[n>r]:r===n?0:i[r>n]}):Object(o.a)(e).sort(function(e,a){var n=e[i],r=a[i],c={true:1,false:-1};return t.state.ordering===_.ASC?n===r?0:c[n>r]:r===n?0:c[r>n]})}},{key:"getIconForOrder",value:function(e){switch(e){case _.ASC:return"arrow-up";case _.DESC:return"arrow-down";default:return"caret-down"}}},{key:"renderHeader",value:function(e,t){var a=this;return r.a.createElement(P.a.TextHeaderCell,{key:e},r.a.createElement(R.a,{position:V.a.BOTTOM_LEFT,content:function(e){var n=e.close;return r.a.createElement(F.a,null,r.a.createElement(F.a.OptionsGroup,{title:"Order",options:[{label:"Ascending",value:_.ASC},{label:"Descending",value:_.DESC}],selected:a.state.orderedColumn===t?a.state.ordering:null,onChange:function(e){a.setState({orderedColumn:t,ordering:e}),n()}}))}},r.a.createElement(M.a,{icon:this.state.orderedColumn===t?this.getIconForOrder(this.state.ordering):"caret-down"},e)))}},{key:"renderRow",value:function(e,t){return r.a.createElement(P.a.Row,{key:"".concat(e.timestamp," ").concat(t," ").concat(e.revenue)},r.a.createElement(P.a.TextCell,null,e.timestamp),r.a.createElement(P.a.TextCell,null,e.game),r.a.createElement(P.a.TextCell,{isNumber:!0},e.revenue),r.a.createElement(P.a.TextCell,{isNumber:!0},e.impressions),r.a.createElement(P.a.TextCell,{isNumber:!0},(e.revenue/e.impressions*1e3).toFixed(3)))}},{key:"render",value:function(){var e=this,t=this.props.data,a=this.state,n=a.selectedPage,i=a.perPage,c=this.sort(t).slice((n-1)*i,n*i);return r.a.createElement("div",null,r.a.createElement("div",{className:"dropdown"},r.a.createElement(h.a,{size:500},"Items per page"),r.a.createElement(f.a,{items:[5,10],width:70,defaultSelectedItem:i,onChange:function(t){e.setState({perPage:t,selectedPage:1})}})),r.a.createElement(P.a,{border:!0},r.a.createElement(P.a.Head,null,G.map(function(t,a){return e.renderHeader(t,a)}),r.a.createElement(P.a.HeaderCell,{width:48,flex:"none"})),r.a.createElement(P.a.VirtualBody,{height:47*i},c.map(function(t,a){return e.renderRow(t,a)}))),r.a.createElement(W,{selected:this.state.selectedPage,pages:Math.ceil(t.length/i),onSelect:function(t){e.setState({selectedPage:t})}}))}}]),t}(r.a.Component);var L=function(){var e=Object(n.useState)({records:[],error:!1}),t=Object(d.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)({startDate:null,endDate:null}),s=Object(d.a)(c,2),p=s[0],E=s[1],C=Object(n.useState)("Callbreak Multiplier"),S=Object(d.a)(C,2),D=S[0],w=S[1];function x(){return(x=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()(g);case 3:t=e.sent,i({records:t.data,error:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i({records:[],error:!0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}Object(n.useEffect)(function(){!function(){x.apply(this,arguments)}()},[]);var y=function(e){var t,a,n=e.records,r=p.startDate,i=p.endDate,c=Object(o.a)(n);if("Both"!==D&&(c=n.filter(function(e){return e.game===D})),r&&i&&r.isValid()&&i.isValid()){var s=(t=r,a=i,function(e){return b()(e).add(12,"hours").isSameOrAfter(t)&&b()(e).add(12,"hours").isSameOrBefore(a)});return c.filter(function(e){return s(e.timestamp)})}return c}(a);return r.a.createElement("div",{className:"app"},r.a.createElement(m.a,{size:800,marginTop:"default",textAlign:"center",marginBottom:"20"},"Welcome to Data Viz"),a.error?r.a.createElement("div",{className:"visualizations"},"Some error occured"):r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{onDateSelected:function(e){E(e)}}),r.a.createElement("div",{className:"visualizations"},r.a.createElement("div",{className:"dropdown"},r.a.createElement(h.a,{size:500},"Select Game"),r.a.createElement(f.a,{items:["Callbreak Multiplier","World Cricket Championship","Both"],width:250,defaultSelectedItem:"Callbreak Multiplier",onChange:function(e){w(e)}}))),y.length>0?r.a.createElement("div",{className:"visualizations"},r.a.createElement(m.a,{size:500,marginTop:"default",textAlign:"center",marginBottom:"20"},"Chart View"),r.a.createElement(I,{data:y}),r.a.createElement(m.a,{size:500,marginTop:"default",textAlign:"center",marginBottom:"20"},"Table View"),r.a.createElement(J,{data:y})):r.a.createElement("div",{className:"visualizations"},"No data available for the date range")))};a(337);c.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.c2676a32.chunk.js.map