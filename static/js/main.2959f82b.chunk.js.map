{"version":3,"sources":["app/api.js","app/datepicker.js","app/chart.js","app/pagination.js","app/datatable.js","app/index.js","app/utils.js","index.js"],"names":["data_endpoint","DatePicker","props","_useState","useState","startDate","endDate","_useState2","Object","slicedToArray","date","setDate","_useState3","_useState4","focused","setFocused","react_default","a","createElement","className","react_dates","startDateId","endDateId","onDatesChange","_ref","isValid","onDateSelected","focusedInput","onFocusChange","isOutsideRange","day","moment","diff","width","document","body","clientWidth","height","margin","Chart","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","chart","renderChart","_this2","data","xScale","d3","domain","d","Date","timestamp","range","yScale","revenue","impressions","xAxis","yAxis","line","x","y","setState","prevProps","refs","fill","stroke","ref","transform","concat","React","Component","Pagination","pages","selected","onSelect","Button","marginRight","appearance","intent","onClick","toConsumableArray","Array","keys","map","i","key","isActive","Order","NONE","ASC","DESC","header","DataTable","searchQuery","orderedColumn","ordering","selectedPage","perPage","_this$state","propKey","sort","b","aValue","bValue","sortTable","true","false","order","text","index","_this3","Table","TextHeaderCell","Popover","position","Position","BOTTOM_LEFT","content","close","Menu","OptionsGroup","title","options","label","value","onChange","TextDropdownButton","icon","getIconForOrder","Row","TextCell","game","isNumber","toFixed","_this4","_this$state2","dataSorted","slice","Text","size","Combobox","items","defaultSelectedItem","border","Head","h","renderHeader","HeaderCell","flex","VirtualBody","item","renderRow","pagination","Math","ceil","length","page","App","records","error","setData","dates","setDates","_useState5","_useState6","setGame","_fetchData","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","axios","sent","t0","stop","apply","arguments","useEffect","fetchData","date1","date2","newRecords","filter","add","isSameOrAfter","isSameOrBefore","getFilteredData","Heading","marginTop","textAlign","marginBottom","datepicker","datatable_DataTable","ReactDOM","render","app","getElementById"],"mappings":"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","file":"static/js/main.2959f82b.chunk.js","sourcesContent":["export const data_endpoint = \"https://www.mocky.io/v2/5cd04a20320000442200fc10\"\n","import React,  {useState} from \"react\"\nimport PropTypes from \"prop-types\"\nimport moment from \"moment\"\nimport \"react-dates/lib/css/_datepicker.css\"\nimport { DateRangePicker } from \"react-dates\"\n\nfunction DatePicker(props) {\n  const [date, setDate] = useState({startDate: null, endDate: null})\n  const [focused, setFocused] = useState(null)\n\n  function onDatesChange({ startDate, endDate }) {\n    setDate({startDate, endDate})\n    if((startDate && endDate) && (startDate.isValid() && endDate.isValid())) {\n      props.onDateSelected({startDate, endDate})\n    }\n  }\n  return (\n    <div className=\"date-picker\">\n      <DateRangePicker\n        startDate={date.startDate}\n        endDate={date.endDate}\n        startDateId=\"start_date\"\n        endDateId=\"end_date\"\n        onDatesChange={onDatesChange}\n        focusedInput={focused}\n        onFocusChange={(focused) =>\n          setFocused(focused)\n        }\n        isOutsideRange={day => (moment().diff(day) < 0)}\n      />\n    </div>\n  )\n}\n\nDatePicker.propTypes = {\n  onDateSelected: PropTypes.func\n}\n\nexport default DatePicker\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport * as d3 from \"d3\"\n\nconst width = document.body.clientWidth > 1000 ? 1000 : document.body.clientWidth\nconst height = width / 3\nconst margin = {\n  left: 50,\n  right: 20,\n  top: 20,\n  bottom: 20\n}\n\nclass Chart extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      chart: null\n    }\n  }\n\n  componentDidMount(){\n    this.renderChart()\n  }\n\n  renderChart() {\n    const { data } = this.props\n    this.xScale = d3.scaleTime().domain([d3.min(data, d => new Date(d.timestamp)), d3.max(data, d => new Date(d.timestamp))]).range([0 + margin.left, width - margin.right])\n    this.yScale = d3.scaleLinear()\n      .domain([0, d3.max(data, d =>  (d.revenue/d.impressions) * 1000)])\n      .range([height - margin.top, 0 + margin.bottom])\n\n    this.xAxis = d3.axisBottom(this.xScale)\n    this.yAxis = d3.axisLeft(this.yScale)\n\n    this.line = d3.line()\n      .x(d => this.xScale(new Date(d.timestamp)))\n      .y(d => this.yScale((d.revenue/d.impressions) * 1000))\n    \n    this.setState({\n      chart: this.line(data)\n    })\n  }\n\n  componentDidUpdate(prevProps) {\n    if(prevProps.data !==this.props.data){\n      this.renderChart()\n    }\n    d3.select(this.refs.xAxis).call(this.xAxis)\n    d3.select(this.refs.yAxis).call(this.yAxis)\n  }\n\n  render() {\n    return(\n      <svg className=\"chart\" width={width} height={height}>\n        <path d={this.state.chart} fill='none' stroke=\"#1070CA\"></path>\n        <g>\n          <g ref=\"xAxis\" transform={`translate(0, ${height-margin.bottom})`}></g>\n          <g ref=\"yAxis\" transform={`translate(${margin.left}, 0)`}></g>\n        </g>\n      </svg>\n    )\n  }\n}\n\nChart.propTypes = {\n  data: PropTypes.array\n}\n\nexport default Chart\n\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { Button } from \"evergreen-ui\"\n\nfunction Pagination({pages, selected, onSelect}) {\n  return (\n    <div className=\"pagination\">\n      <Button marginRight={16} appearance=\"minimal\" intent=\"none\" onClick={()=>selected !== 1 && onSelect(selected-1)}>&lt;&lt;</Button>\n      {[...Array(pages).keys()].map((i) =>(\n        <Button key={i + 1} marginRight={16} appearance=\"minimal\" intent=\"none\" isActive={(selected === i + 1)} onClick={()=>onSelect(i+1)}>{i + 1}</Button>\n      ))}\n      <Button marginRight={16} appearance=\"minimal\" intent=\"none\" onClick={()=>pages !== selected && onSelect(selected+1)}>&gt;&gt;</Button>\n    </div>\n  )\n}\n\nPagination.propTypes = {\n  pages : PropTypes.number,\n  selected : PropTypes.number,\n  onSelect : PropTypes.func\n}\n\nexport default Pagination\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport {\n  Table,\n  Popover,\n  Position,\n  Menu,\n  TextDropdownButton,\n  Combobox,\n  Text\n} from \"evergreen-ui\"\nimport Pagination from \"./pagination\"\n\nconst Order = {\n  NONE: \"NONE\",\n  ASC: \"ASC\",\n  DESC: \"DESC\"\n}\n\nconst header = [\"timestamp\", \"game\", \"revenue\", \"impressions\", \"ecpm\"]\n\nexport default class DataTable extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      searchQuery: \"\",\n      orderedColumn: 0,\n      ordering: Order.ASC,\n      selectedPage: 1,\n      perPage: 5\n    }\n  }\n\n  sort(data) {\n    const { ordering, orderedColumn } = this.state\n    if (ordering === Order.NONE) return data\n\n    let propKey = header[orderedColumn]\n\n    if(propKey === \"ecpm\")\n      return [...data].sort((a, b) => {\n        let aValue = (a.revenue/a.impressions) * 1000\n        let bValue = (b.revenue/b.impressions) * 1000\n  \n        const sortTable = { true: 1, false: -1 }\n  \n        if (this.state.ordering === Order.ASC) {\n          return aValue === bValue ? 0 : sortTable[aValue > bValue]\n        }\n  \n        return bValue === aValue ? 0 : sortTable[bValue > aValue]\n      })\n    return [...data].sort((a, b) => {\n      let aValue = a[propKey]\n      let bValue = b[propKey]\n\n      const sortTable = { true: 1, false: -1 }\n\n      if (this.state.ordering === Order.ASC) {\n        return aValue === bValue ? 0 : sortTable[aValue > bValue]\n      }\n\n      return bValue === aValue ? 0 : sortTable[bValue > aValue]\n    })\n  }\n\n  getIconForOrder(order) {\n    switch (order) {\n    case Order.ASC:\n      return \"arrow-up\"\n    case Order.DESC:\n      return \"arrow-down\"\n    default:\n      return \"caret-down\"\n    }\n  }\n\n  renderHeader(text, index) {\n    return (\n      <Table.TextHeaderCell key={text}>\n        <Popover\n          position={Position.BOTTOM_LEFT}\n          content={({ close }) => (\n            <Menu>\n              <Menu.OptionsGroup\n                title=\"Order\"\n                options={[\n                  { label: \"Ascending\", value: Order.ASC },\n                  { label: \"Descending\", value: Order.DESC }\n                ]}\n                selected={\n                  this.state.orderedColumn === index ? this.state.ordering : null\n                }\n                onChange={value => {\n                  this.setState({\n                    orderedColumn: index,\n                    ordering: value\n                  })\n                  close()\n                }}\n              />\n            </Menu>\n          )}\n        >\n          <TextDropdownButton\n            icon={\n              this.state.orderedColumn === index\n                ? this.getIconForOrder(this.state.ordering)\n                : \"caret-down\"\n            }\n          >\n            {text}\n          </TextDropdownButton>\n        </Popover>\n      </Table.TextHeaderCell>\n    )\n  }\n\n  renderRow(d, i) {\n    return (\n      <Table.Row key={`${d.timestamp} ${i} ${d.revenue}`}>\n        <Table.TextCell>{d.timestamp}</Table.TextCell>\n        <Table.TextCell>{d.game}</Table.TextCell>\n        <Table.TextCell isNumber>{d.revenue}</Table.TextCell>\n        <Table.TextCell isNumber>{d.impressions}</Table.TextCell>\n        <Table.TextCell isNumber>{((d.revenue/d.impressions) * 1000).toFixed(3)}</Table.TextCell>\n      </Table.Row>\n    )\n  }\n\n  render() {\n    const { data } = this.props \n    const { selectedPage, perPage } = this.state\n    const dataSorted = this.sort(data).slice((selectedPage - 1) * perPage, (selectedPage * perPage))\n    return (\n      <div>\n        <div className=\"dropdown\">\n          <Text size={500}>Items per page</Text>\n          <Combobox\n            items={[5, 10]}\n            width={70}\n            defaultSelectedItem={perPage}\n            onChange={selected => {this.setState({perPage: selected, selectedPage: 1})}}\n          />\n        </div>\n        <Table border>\n          <Table.Head>\n            {header.map((h, i)=>this.renderHeader(h, i))}\n            <Table.HeaderCell width={48} flex=\"none\" />\n          </Table.Head>\n          <Table.VirtualBody height={47*perPage}>\n            {dataSorted.map((item, i) => this.renderRow(item, i))}\n          </Table.VirtualBody>\n        </Table>\n\n        <Pagination selected={this.state.selectedPage} pages={Math.ceil(data.length/perPage)} onSelect={(page=>{this.setState({selectedPage: page})})}/>\n      </div>\n    )\n  }\n}\n\nDataTable.propTypes = {\n  data: PropTypes.array\n}\n","import React, {useState, useEffect} from \"react\"\nimport { Heading, Text, Combobox } from \"evergreen-ui\"\nimport axios from \"axios\"\nimport { data_endpoint } from \"./api\"\nimport { rangeBetween } from \"./utils\"\nimport Datepicker from \"./datepicker\"\nimport Chart from \"./chart\"\nimport Table from \"./datatable\"\n\nfunction App() {\n  const [data, setData] = useState({records: [], error: false})\n  const [dates, setDates] = useState({startDate: null, endDate: null})\n  const [game, setGame] = useState(\"Callbreak Multiplier\")\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  async function fetchData() {\n    try {\n      const response = await axios(data_endpoint)\n      setData({records: response.data, error: true})\n    } catch(e) {\n      setData({records: [], error: true})\n    }\n  }\n\n  function getFilteredData({records}) {\n    const {startDate, endDate} = dates\n    let newRecords = [...records]\n    if(game !== \"Both\")\n      newRecords = records.filter((d)=>(d.game === game))\n    if((startDate && endDate) && (startDate.isValid() && endDate.isValid())) {\n      const range = rangeBetween(startDate, endDate)\n      return newRecords.filter((d)=>range(d.timestamp))\n    }\n    return newRecords\n  }\n\n  const records = getFilteredData(data)\n\n  return (\n    <div className=\"app\">\n      <Heading size={800} marginTop=\"default\" textAlign=\"center\" marginBottom=\"20\">Welcome to Data Viz</Heading>\n      <Datepicker \n        onDateSelected={(dates)=>{setDates(dates)}}\n      />\n      <div className=\"visualizations\">\n        <div className=\"dropdown\">\n          <Text size={500}>Select Game</Text>\n          <Combobox\n            items={[\"Callbreak Multiplier\", \"World Cricket Championship\", \"Both\"]}\n            width={250}\n            defaultSelectedItem={\"Callbreak Multiplier\"}\n            onChange={selected => {setGame(selected)}}\n          />\n        </div>\n      </div>\n      {\n        records.length > 0 ?\n          (<div className=\"visualizations\">\n            <Heading size={500} marginTop=\"default\" textAlign=\"center\" marginBottom=\"20\">Chart View</Heading>\n            <Chart data={records}></Chart>\n            <Heading size={500} marginTop=\"default\" textAlign=\"center\" marginBottom=\"20\">Table View</Heading>\n            <Table data={records}></Table>\n          </div>)\n          :\n          <div className=\"visualizations\">No data available for the date range</div>\n      }\n      \n    </div>\n  )\n}\n\nexport default App\n","import moment from \"moment\"\n\nexport function rangeBetween(date1, date2) {\n  return function (date) {\n    return moment(date).add(12, \"hours\").isSameOrAfter(date1) && moment(date).add(12, \"hours\").isSameOrBefore(date2)\n  }\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.scss\"\nimport App from \"./app\"\nimport \"react-dates/initialize\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}